# AI Script Agent

The Script Agent component generates individual scripts based on simple specifications using AI models.

## Features

- **Individual Script Generation**: Creates standalone scripts based on name, description, and requirements
- **Multiple AI Model Support**: Works with Claude (Anthropic), GPT (OpenAI), or DeepSeek
- **Iterative Improvement**: Can improve scripts through multiple iterations
- **Conversation History**: Saves the conversation history for reference

## Usage

### Configuration

The script agent can be configured using a JSON configuration file at `script-agent/config.json`.

Example configuration:

```json
{
  "model": {
    "provider": "claude",
    "name": "claude-3-7-sonnet-20250219",
    "temperature": 0.7,
    "max_tokens": 4000
  },
  "generation": {
    "iterations": 1,
    "add_comments": true,
    "include_tests": false
  },
  "evaluation": {
    "enabled": true,
    "criteria": {
      "functionality": 0.5,
      "code_quality": 0.3,
      "documentation": 0.2
    },
    "min_accepted_score": 0.7
  },
  "output": {
    "save_scripts": true,
    "output_dir": "generated_scripts",
    "save_conversation": true
  }
}
```

### Command-Line Usage

You can run the script agent directly using the provided shell script:

```bash
./run_agent.sh --name "data_processor.py" --description "Process data from CSV files" --requirements "Handle missing values" "Normalize data"
```

Or using Python:

```bash
python claude_script_agent.py --name "data_processor.py" --description "Process data from CSV files" --requirements "Handle missing values" "Normalize data"
```

Additional options:
- `--output`: Path where the script should be saved
- `--config`: Path to the configuration file
- `--provider`: AI model provider to use (claude, openai, deepseek)
- `--iterations`: Number of iterations to run

### Programmatic Usage

You can also use the script agent programmatically:

```python
from script_agent.claude_script_agent import ScriptAgent
from model_providers import get_provider
import asyncio

# Initialize provider
provider = get_provider("claude")

# Initialize script agent
agent = ScriptAgent(provider=provider)

# Generate script
script = asyncio.run(agent.generate_script(
    name="data_processor.py",
    description="Process data from CSV files",
    requirements=["Handle missing values", "Normalize data"]
))

print(script)
```

## Output Files

The script agent can generate two types of output files:

1. **Generated Scripts**: The actual scripts generated by the AI model
2. **Conversation History**: JSON files containing the conversation history between the agent and the AI model

By default, these files are saved to the `generated_scripts` directory, but this can be configured.

## Dependencies

- Python 3.6+
- anthropic>=0.5.0
- python-dotenv>=1.0.0

## Troubleshooting

- **API Key Issues**: Ensure the appropriate API key is set in your environment
- **Generation Quality**: Increase `iterations` for better results
- **Output Issues**: Check the permissions of the output directory
